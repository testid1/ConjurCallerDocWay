name: build-and-test
on:
 workflow_dispatch:
jobs: 
  call-reusable:
    uses: testid1/ConjurAPI/.github/workflows/MealOrdReusable.yml@main
    with:
      CONJUR_VARIABLE_PATH: data/vault/conjurtest/conjurtest/username|USER;data/vault/conjurtest/conjurtest/password|PASS

    secrets:  
      CONJUR_URL: ${{ secrets.CONJUR_URL }}
      CONJUR_ACCOUNT: ${{ secrets.CONJUR_ACCOUNT }}
      CONJUR_HOST_ID: ${{ secrets.CONJUR_HOST_ID }}
      CONJUR_API_KEY: ${{ secrets.CONJUR_API_KEY }}

#  fetch:
#    runs-on: ubuntu-latest
#    steps:
#      - name: Fetch secrets from Conjur (API key auth)
#        id: conjur
#        uses: cyberark/conjur-action@v2.0.12
#        with:
#          url: ${{ secrets.CONJUR_URL }}
#          account: ${{ secrets.CONJUR_ACCOUNT }}
#          host_id: ${{ secrets.CONJUR_HOST_ID }}
#          api_key: ${{ secrets.CONJUR_API_KEY }}
#          secrets: data/vault/conjurtest/conjurtest/username|USER;data/vault/conjurtest/conjurtest/password|PASS

#      - name: Print secret length
#        run: |
#          echo "${#USER}"


#          certificate: ${{ secrets.CONJUR_CERT }} # optional
#      - name: Use secrets from Conjur (API key auth)
#        id: setoutput
#        run: |
#          echo "${#USER}"
        
    
